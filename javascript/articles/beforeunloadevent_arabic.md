<!--
Meta Description: # حدث BeforeUnloadEvent في JavaScript: كيفية استخدامه وتأثيره ## ملخص حدث `BeforeUnloadEvent` في JavaScript يُستخدم للتعامل مع الحالات التي يكون فيها ...
Meta Keywords: مغادرة, الصفحة, event, حدث, beforeunloadevent
-->

# حدث BeforeUnloadEvent في JavaScript: كيفية استخدامه وتأثيره

## ملخص
حدث `BeforeUnloadEvent` في JavaScript يُستخدم للتعامل مع الحالات التي يكون فيها المستخدم على وشك مغادرة الصفحة، مما يتيح لك تقديم تحذير للمستخدم قبل الخروج.

## الوثائق
### الغرض
يهدف حدث `BeforeUnloadEvent` إلى إعطاء المطورين القدرة على تنفيذ إجراءات معينة قبل مغادرة المستخدم للصفحة. يتم ذلك عادةً لتحذير المستخدم من فقدان البيانات غير المحفوظة أو لتأكيد رغبته في مغادرة الصفحة.

### الاستخدام
يمكنك استخدام `BeforeUnloadEvent` من خلال إضافة مستمع حدث إلى الكائن `window`. عند محاولة المستخدم مغادرة الصفحة، يتم استدعاء هذا الحدث، مما يمنحك فرصة لإظهار رسالة تأكيد مخصصة.

### التفاصيل
- **الطريقة:** `window.addEventListener('beforeunload', function(event) { ... });`
- **الخصائص:** عند استدعاء الحدث، يمكن أن يحتوي على خاصية `returnValue`، والتي تُستخدم لتحديد الرسالة التي سيتم عرضها.
- **التوافق:** يدعم أغلب المتصفحات الحديثة، ولكن قد تختلف طريقة عرض الرسالة بين المتصفحات المختلفة.

## الأمثلة
### مثال 1: رسالة تأكيد بسيطة
```javascript
window.addEventListener('beforeunload', function(event) {
    event.preventDefault(); // يُستخدم لإظهار نافذة التأكيد
    event.returnValue = 'هل أنت متأكد أنك تريد مغادرة هذه الصفحة؟'; // الرسالة التي ستظهر
});
```

### مثال 2: عدم السماح بالمغادرة في حالة وجود بيانات غير محفوظة
```javascript
let isDirty = false;

window.addEventListener('beforeunload', function(event) {
    if (isDirty) {
        event.preventDefault();
        event.returnValue = 'لديك تغييرات غير محفوظة. هل تريد بالتأكيد مغادرة الصفحة؟';
    }
});

// مثال لتغيير الحالة عند تعديل البيانات
document.querySelector('input').addEventListener('input', function() {
    isDirty = true;
});
```

## الشرح
### المزالق الشائعة
- **عدم عرض الرسالة المخصصة:** بعض المتصفحات لا تعرض الرسالة المخصصة التي تحددها، وتظهر رسالة افتراضية بدلاً منها.
- **عدم التوافق:** قد لا يدعم بعض المتصفحات القديمة أو الإصدارات غير المكتملة هذا الحدث بشكل صحيح.
- **إضافة مستمع الحدث في الوقت الخاطئ:** تأكد من إضافة مستمع الحدث في وقت مبكر بما فيه الكفاية، عادةً في الجزء العلوي من الشيفرة أو عند تحميل الصفحة، لضمان عمله بشكل صحيح.

## ملخص جملة واحدة
حدث `BeforeUnloadEvent` في JavaScript يُستخدم لتحذير المستخدم قبل مغادرة الصفحة، مما يساعد في تجنب فقدان البيانات غير المحفوظة.