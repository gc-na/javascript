<!--
Meta Description: # Trusted Types في جافا سكريبت: حماية تطبيقاتك من هجمات XSS ## ملخص Trusted Types هي ميزة جديدة في JavaScript تهدف إلى تعزيز أمان تطبيقات الويب من خلا...
Meta Keywords: استخدام, trusted, types, إلى, موثوقة
-->

# Trusted Types في جافا سكريبت: حماية تطبيقاتك من هجمات XSS

## ملخص
Trusted Types هي ميزة جديدة في JavaScript تهدف إلى تعزيز أمان تطبيقات الويب من خلال منع هجمات البرمجة النصية عبر المواقع (XSS) عن طريق فرض استخدام أنواع معينة من البيانات الموثوقة.

## الوثائق
**الغرض:**  
تم تصميم Trusted Types لتقليل مخاطر هجمات XSS من خلال تقييد كيفية استخدام النصوص غير الموثوقة في DOM (نموذج كائن الوثيقة). من خلال فرض استخدام أنواع موثوقة، يمكن للمطورين التأكد من أن البيانات المستخدمة في العمليات الحساسة قد تم التحقق منها.

**الاستخدام:**  
لتفعيل Trusted Types، يجب على المطورين أولاً تمكين الخاصية في المتصفح. بعد ذلك، يمكنهم تعريف أنواع موثوقة باستخدام واجهة `TrustedTypePolicy`. يمكن استخدام هذه الأنواع الموثوقة لتحويل النصوص غير الموثوقة إلى أنواع موثوقة، مما يمنع تنفيذ النصوص الضارة.

**التفاصيل:**
1. **تعريف نوع موثوق:**  
   يمكن للمطورين تعريف نوع موثوق عن طريق إنشاء سياسة جديدة باستخدام `trustedTypes.createPolicy`.

2. **تطبيق السياسة:**  
   بعد تعريف السياسة، يمكن استخدامها لتحويل النصوص غير الموثوقة إلى نوع موثوق، مثل `createHTML`, `createScript`, أو `createScriptURL`.

3. **التحقق من الموثوقية:**  
   عند محاولة إدخال نصوص غير موثوقة في DOM، ستقوم Trusted Types بإرجاع خطأ إذا لم يكن النص موثوقًا.

## الأمثلة
### مثال 1: تعريف سياسة جديدة
```javascript
if (window.trustedTypes) {
    const policy = trustedTypes.createPolicy('default', {
        createHTML: (input) => input,
        createScript: (input) => input,
    });
}
```

### مثال 2: استخدام السياسة
```javascript
const html = policy.createHTML('<div>محتوى آمن</div>');
document.body.innerHTML = html; // سيتم إدخال المحتوى بأمان
```

### مثال 3: محاولة استخدام نص غير موثوق
```javascript
// هذا سيفشل إذا لم يكن النص موثوقًا
const unsafeInput = '<script>alert("XSS")</script>';
const safeHtml = policy.createHTML(unsafeInput); // سيرمي خطأ
```

## الشرح
**الاخطاء الشائعة:**  
- عدم تعريف سياسة موثوقة قبل استخدامها، مما يؤدي إلى عدم القدرة على تحويل النصوص بشكل صحيح.
- استخدام نصوص غير موثوقة مباشرة في DOM دون تحويلها إلى نوع موثوق، مما قد يعرض التطبيق للاختراق.

**ملاحظات إضافية:**  
- يجب على المطورين الانتباه إلى أن Trusted Types لا تحل محل تدابير الأمان الأخرى، مثل Content Security Policy (CSP). من الأفضل استخدامها كنظام إضافي لتعزيز الأمان.

## ملخص بجملة واحدة
Trusted Types هي ميزة في JavaScript تهدف إلى تحسين أمان تطبيقات الويب من خلال فرض استخدام أنواع موثوقة لحماية التطبيق من هجمات XSS.