<!--
Meta Description: # حدث onbeforeunload في JavaScript: كيفية استخدامه وأهميته ## ملخص يعد حدث `onbeforeunload` في JavaScript من الأحداث المهمة التي تتيح للمطورين عرض رسا...
Meta Keywords: onbeforeunload, الصفحة, مغادرة, حدث, javascript
-->

# حدث onbeforeunload في JavaScript: كيفية استخدامه وأهميته

## ملخص
يعد حدث `onbeforeunload` في JavaScript من الأحداث المهمة التي تتيح للمطورين عرض رسالة تأكيد للمستخدم قبل مغادرة الصفحة. يُستخدم هذا الحدث غالبًا لمنع فقدان البيانات غير المحفوظة.

## الوثائق
### الغرض
يهدف حدث `onbeforeunload` إلى إعطاء المستخدم فرصة للتأكيد قبل مغادرة الصفحة. يُستخدم عادةً في التطبيقات التي تتطلب إدخال بيانات، حيث قد يرغب المستخدم في عدم فقدان التغييرات التي أجرها.

### الاستخدام
يتم استخدام حدث `onbeforeunload` من خلال تعيينه كدالة على كائن `window`. يتم استدعاء هذه الدالة تلقائيًا عندما يحاول المستخدم مغادرة الصفحة. يمكن تخصيص الرسالة التي تظهر للمستخدم، ولكن يجب ملاحظة أن معظم المتصفحات تتجاهل النص المخصص، وتعرض رسائل افتراضية بدلاً من ذلك.

```javascript
window.onbeforeunload = function (event) {
    event.returnValue = 'هل أنت متأكد أنك تريد مغادرة الصفحة؟';
};
```

### التفاصيل
- **العناصر المدعومة**: جميع المتصفحات الحديثة تدعم حدث `onbeforeunload`.
- **نمط الاستخدام**: يمكن استخدامه مع أي حدث يؤدي إلى مغادرة الصفحة، مثل النقر على روابط، إغلاق علامة التبويب، أو تحديث الصفحة.
- **النص المخصص**: في معظم المتصفحات، لا يتم عرض النص المخصص كما هو، بل يتم عرض رسالة تحذيرية عامة.

## الأمثلة
### مثال أساسي
```javascript
window.onbeforeunload = function () {
    return 'هل أنت متأكد أنك تريد مغادرة الصفحة؟ قد تفقد بياناتك غير المحفوظة!';
};
```

### مثال مع شرط
```javascript
let isFormDirty = false;

document.getElementById('myForm').addEventListener('input', function() {
    isFormDirty = true;
});

window.onbeforeunload = function () {
    if (isFormDirty) {
        return 'لديك تغييرات غير محفوظة. هل أنت متأكد أنك تريد مغادرة الصفحة؟';
    }
};
```

## الشرح
### العثرات الشائعة
1. **تجاهل النص المخصص**: كما ذُكر سابقًا، معظم المتصفحات لا تظهر النص المخصص، مما قد يسبب ارتباكًا للمطورين.
2. **الاستخدام غير المناسب**: ينبغي استخدام `onbeforeunload` فقط عندما يكون هناك حاجة حقيقية، مثل وجود بيانات غير محفوظة، لتجنب إزعاج المستخدمين.
3. **التوافق عبر المتصفحات**: يجب اختبار الكود عبر متصفحات مختلفة لضمان التوافق، نظرًا لأن سلوك `onbeforeunload` قد يختلف.

### ملاحظات إضافية
- يجب تجنب استخدام هذا الحدث بشكل مفرط، حيث يمكن أن يؤدي إلى تجربة مستخدم سيئة.
- يُفضل دائمًا استخدامه بشكل يتسم بالشفافية مع المستخدمين، مثل إظهار تحذيرات واضحة حول فقدان البيانات.

## ملخص
حدث `onbeforeunload` في JavaScript هو أداة قوية تتيح للمطورين عرض تحذيرات للمستخدمين قبل مغادرة الصفحة، مما يساعد على تقليل فقدان البيانات غير المحفوظة.