<!--
Meta Description: # JavaScriptのonselectionchangeイベント: 使用方法と例 ## 概要 `onselectionchange`は、ユーザーがテキストやオブジェクトを選択した時に発生するイベントです。このイベントを使用することで、選択状態の変化に応じた処理を実行することができます。 ## ド...
Meta Keywords: onselectionchange, document, イベントは, javascript, function
-->

# JavaScriptのonselectionchangeイベント: 使用方法と例

## 概要
`onselectionchange`は、ユーザーがテキストやオブジェクトを選択した時に発生するイベントです。このイベントを使用することで、選択状態の変化に応じた処理を実行することができます。

## ドキュメンテーション
`onselectionchange`イベントは、主に`document`オブジェクトに関連付けられており、ユーザーが選択した内容が変更されるとトリガーされます。このイベントは、リッチテキストエディタやカスタム選択機能を持つアプリケーションで特に役立ちます。

### 使用方法
このイベントは通常、次のようにしてリスナーを追加することで使用されます。

```javascript
document.onselectionchange = function() {
    // 選択された内容に基づく処理
};
```

### 詳細
- **イベントオブジェクト**: `onselectionchange`イベントは、特定のイベントオブジェクトを発行し、選択された内容の情報を取得することができます。
- **ブラウザ対応**: 現在、`onselectionchange`は主にChromeおよびFirefoxでサポートされていますが、他のブラウザでは異なる挙動を示す場合があります。
- **パフォーマンス**: 頻繁にトリガーされるため、イベントハンドラー内での処理は軽量に保つことが推奨されます。

## 例
以下は、`onselectionchange`イベントの基本的な使用例です。

```javascript
document.onselectionchange = function() {
    const selection = document.getSelection();
    console.log("選択されたテキスト:", selection.toString());
};
```

この例では、ユーザーが選択したテキストがコンソールに表示されます。

## 説明
- **一般的な落とし穴**: `onselectionchange`は、選択が解除された場合にもトリガーされます。これにより、選択の状態を正確に追跡するために、ハンドラー内で選択内容が空でないか確認する必要があります。
- **ブラウザの互換性**: すべてのブラウザで同じように動作しない場合があるため、特にアプリケーションが複数のブラウザで動作することを求める場合は慎重にテストする必要があります。
- **最適化の必要性**: 選択が頻繁に変化するため、パフォーマンスの観点から、可能な限り効率的なコードを書くことが重要です。

## 一文の要約
`onselectionchange`は、ユーザーの選択が変わった際に発生するイベントで、テキストやオブジェクトの選択状態に基づく処理を実行するために使用されます。