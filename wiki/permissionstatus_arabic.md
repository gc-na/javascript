<!--
Meta Description: # حالة الإذن (PermissionStatus) في جافا سكريبت: كل ما تحتاج معرفته ## ملخص تُستخدم واجهة `PermissionStatus` في جافا سكريبت للتحقق من حالة أذونات المست...
Meta Keywords: permissionstatus, حالة, الإذن, permissions, التحقق
-->

# حالة الإذن (PermissionStatus) في جافا سكريبت: كل ما تحتاج معرفته

## ملخص
تُستخدم واجهة `PermissionStatus` في جافا سكريبت للتحقق من حالة أذونات المستخدم لتطبيقات الويب، مثل الوصول إلى الموقع أو الإشعارات. توفر هذه الواجهة طريقة بسيطة لمعرفة ما إذا كانت الأذونات مُعطاة، مُعلقة، أو مرفوضة.

## الوثائق
### الغرض
تساعد `PermissionStatus` المطورين في إدارة الأذونات بشكل فعال، مما يُحسّن من تجربة المستخدم ويضمن عدم طلب الأذونات بشكل متكرر دون داعٍ.

### الاستخدام
تُستخدم `PermissionStatus` مع واجهة `Permissions`، حيث يمكن للمطورين طلب حالة الإذن عن الموارد المختلفة. تتضمن الأنواع الشائعة من الأذونات: 
- الموقع الجغرافي
- الإشعارات
- الوصول إلى الكاميرا أو الميكروفون

### التفاصيل
يمكن التحقق من حالة الإذن باستخدام `navigator.permissions.query()`، والذي يُرجع كائن `PermissionStatus`. يحتوي هذا الكائن على خاصيتين رئيسيتين:
- `state`: تُشير إلى حالة الإذن، ويمكن أن تكون واحدة من القيم التالية: "granted" (مُعطى)، "denied" (مرفوض)، أو "prompt" (مطلوب).
- `onchange`: حدث يُستخدم للاستماع للتغييرات في حالة الإذن.

## الأمثلة
### مثال 1: التحقق من إذن الموقع
```javascript
navigator.permissions.query({ name: 'geolocation' }).then(function(permissionStatus) {
    console.log('حالة الإذن للموقع:', permissionStatus.state);

    permissionStatus.onchange = function() {
        console.log('تغيرت حالة الإذن للموقع:', this.state);
    };
});
```

### مثال 2: التحقق من إذن الإشعارات
```javascript
navigator.permissions.query({ name: 'notifications' }).then(function(permissionStatus) {
    console.log('حالة الإذن للإشعارات:', permissionStatus.state);

    permissionStatus.onchange = function() {
        console.log('تغيرت حالة الإذن للإشعارات:', this.state);
    };
});
```

## الشرح
تتضمن بعض الفخاخ الشائعة عند استخدام `PermissionStatus` ما يلي:
- **عدم التحقق من دعم المتصفح**: ليست جميع المتصفحات تدعم واجهة `Permissions`، لذا تأكد من التحقق من دعم المتصفح قبل استخدامها.
- **عدم التعامل مع التغييرات**: إذا لم تقم بإضافة مستمع للحدث `onchange`، فلن تتمكن من معرفة متى تتغير حالة الإذن، مما قد يؤثر على تجربة المستخدم.

## ملخص بجملة واحدة
`PermissionStatus` في جافا سكريبت توفر وسيلة فعالة للتحقق ومراقبة حالة أذونات المستخدم لتطبيقات الويب.