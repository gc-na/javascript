<!--
Meta Description: # EventSource في JavaScript: تواصل فعّال مع الخادم ## ملخص EventSource هو واجهة برمجة تطبيقات (API) في JavaScript تتيح للمستخدمين إنشاء اتصالات مستمرة...
Meta Keywords: eventsource, event, الخادم, الاتصال, javascript
-->

# EventSource في JavaScript: تواصل فعّال مع الخادم

## ملخص
EventSource هو واجهة برمجة تطبيقات (API) في JavaScript تتيح للمستخدمين إنشاء اتصالات مستمرة مع الخادم، مما يسهل تلقي التحديثات في الوقت الحقيقي عبر بروتوكول HTTP. يستخدم EventSource بشكل شائع في تطبيقات الويب التي تتطلب تحديثات تلقائية، مثل تحديثات الأخبار أو إشعارات الدردشة.

## الوثائق
### الغرض
يهدف EventSource إلى توفير وسيلة سهلة وفعّالة للتفاعل مع خوادم HTTP من خلال استلام بيانات متدفقة في شكل نصوص، مما يسمح للمطورين بإنشاء تطبيقات تفاعلية دون الحاجة إلى إجراء استعلامات متكررة.

### الاستخدام
لإنشاء اتصال باستخدام EventSource، يجب على المطورين استخدام الكود التالي:

```javascript
const source = new EventSource('URL_TO_SERVER');
```

حيث `URL_TO_SERVER` هو عنوان الخادم الذي ترغب في الاتصال به. بعد إنشاء هذا الكائن، يمكن للمستخدم الاستماع إلى الأحداث المرسلة من الخادم باستخدام الدالة `addEventListener`.

### التفاصيل
- **التحكم في الاتصال**: يمكن إغلاق الاتصال بواسطة استدعاء `source.close()`.
- **الأحداث**: يدعم EventSource الأحداث الافتراضية مثل `message`، وأيضًا الأحداث المخصصة.
- **الاستجابة**: يجب أن تكون استجابة الخادم بتنسيق نصي مرمّز بشكل صحيح، وعادةً ما تكون بتنسيق نص عادي أو `text/event-stream`.
- **التوافق**: مدعوم في معظم المتصفحات الحديثة.

## الأمثلة
### مثال أساسي لإنشاء اتصال
```javascript
const source = new EventSource('https://example.com/events');

source.onmessage = function(event) {
    console.log('Received message:', event.data);
};

source.onerror = function(event) {
    console.error('Error:', event);
};
```

### مثال مع أحداث مخصصة
```javascript
source.addEventListener('customEvent', function(event) {
    console.log('Custom event data:', event.data);
});
```

## الشرح
### الفخاخ الشائعة
- **عدم دعم المتصفحات القديمة**: تأكد من أن المستخدمين يستخدمون متصفحات حديثة تدعم EventSource.
- **تكوين الخادم**: يجب تكوين الخادم بشكل صحيح لإرسال البيانات بتنسيق `text/event-stream`.
- **إغلاق الاتصال**: يجب دائمًا إغلاق الاتصال عند عدم الحاجة إليه لتجنب استخدام الموارد بشكل غير ضروري.

### ملاحظات إضافية
- لا يمكن استخدام EventSource مع بروتوكولات مثل WebSocket أو مع طرق HTTP مثل POST. يتم استخدامه فقط مع GET.
- يتم إعادة الاتصال تلقائيًا إذا انقطع الاتصال، مما يجعله خيارًا موثوقًا للتطبيقات التي تتطلب تحديثات مستمرة.

## ملخص بعبارة واحدة
EventSource في JavaScript يوفر وسيلة فعّالة لاستقبال بيانات متدفقة من الخادم في الوقت الحقيقي، مما يسهل بناء تطبيقات تفاعلية.