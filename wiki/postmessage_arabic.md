<!--
Meta Description: # استخدام postMessage في جافا سكريبت: التواصل بين النوافذ ## ملخص تُعتبر وظيفة `postMessage` في جافا سكريبت وسيلة فعالة للتواصل بين النوافذ، أو الإطار...
Meta Keywords: بين, postmessage, message, window, الإطار
-->

# استخدام postMessage في جافا سكريبت: التواصل بين النوافذ

## ملخص
تُعتبر وظيفة `postMessage` في جافا سكريبت وسيلة فعالة للتواصل بين النوافذ، أو الإطارات، أو حتى بين التطبيقات المختلفة. تُستخدم هذه الوظيفة في حالات مثل التواصل بين صفحات الويب المتنوعة أو بين صفحة الويب وتطبيقات الويب المدمجة.

## الوثائق
### الغرض
تسمح `postMessage` بإرسال البيانات بين نوافذ المتصفح المختلفة، مما يسهل تبادل المعلومات بشكل آمن بين المصادر المختلفة.

### الاستخدام
تستخدم `postMessage` كالتالي:
```javascript
window.postMessage(message, targetOrigin);
```
- **message**: البيانات التي ترغب في إرسالها.
- **targetOrigin**: URL المصدر الذي يمكنه استقبال الرسالة. يمكنك استخدام '*' للسماح لجميع المصادر، لكن يُفضل تحديد المصدر لضمان الأمان.

### تفاصيل إضافية
تُستخدم `postMessage` عادةً في الحالات التالية:
- الإرسال بين نوافذ متصفح مختلفة.
- التواصل بين صفحة ويب وإطار مدمج.
- الاتصال بين صفحة ويب وتطبيقات ذات منشأ مختلف.

## أمثلة
### مثال بسيط على الاستخدام
```javascript
// في الإطار المرسل
const message = "مرحبًا من الإطار المرسل!";
window.parent.postMessage(message, "https://example.com");

// في الإطار المستلم
window.addEventListener("message", function(event) {
    if (event.origin === "https://example.com") {
        console.log("استلمت الرسالة:", event.data);
    }
});
```

### مثال على استخدام '*' كـ targetOrigin
```javascript
// في الإطار المرسل
const message = "مرحبًا بالعالم!";
window.parent.postMessage(message, "*");

// في الإطار المستلم
window.addEventListener("message", function(event) {
    console.log("استلمت الرسالة:", event.data);
});
```

## الشرح
### الفخاخ الشائعة والملاحظات
- **الأمان**: يجب أن تكون حذرًا عند استخدام `*` كمصدر مستهدف، لأن ذلك يفتح المجال لاستقبال الرسائل من أي مصدر، مما قد يُعرض تطبيقك للمخاطر.
- **التنسيق**: تأكد من أن البيانات التي ترسلها يمكن أن تُعالج بشكل صحيح في الطرف الآخر، وتجنب إرسال كائنات معقدة إذا لم تكن ضرورية.
- **التوافق**: تأكد من دعم المتصفح لهذه الوظيفة، على الرغم من أنها مدعومة على نطاق واسع في معظم المتصفحات الحديثة.

## ملخص جملة واحدة
تُعتبر وظيفة `postMessage` في جافا سكريبت وسيلة آمنة وفعالة للتواصل بين نوافذ المتصفح المختلفة وتطبيقات الويب.