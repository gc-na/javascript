<!--
Meta Description: # تيار الكتابة (WritableStream) في جافا سكريبت ## ملخص تيار الكتابة (WritableStream) هو واجهة في جافا سكريبت تسمح بكتابة البيانات إلى تدفقات مخصصة. يت...
Meta Keywords: writablestream, البيانات, write, الكتابة, chunk
-->

# تيار الكتابة (WritableStream) في جافا سكريبت

## ملخص
تيار الكتابة (WritableStream) هو واجهة في جافا سكريبت تسمح بكتابة البيانات إلى تدفقات مخصصة. يتم استخدامه في التطبيقات التي تتطلب التحكم في كيفية ووقت كتابة البيانات، مثل معالجة الملفات أو البيانات الواردة من الشبكة.

## الوثائق
### الغرض
تيار الكتابة هو جزء من واجهة تدفقات الويب (Web Streams API)، ويهدف إلى تقديم طريقة فعالة ومرنة للتعامل مع البيانات التي يتم كتابتها.

### الاستخدام
يمكن استخدام WritableStream لإنشاء تيارات مخصصة من خلال تمرير معالج (controller) يحدد كيفية التعامل مع البيانات. هذا المعالج يمكن أن يتضمن أساليب مثل `write()` و `close()` و `abort()`.

#### التركيب الأساسي
```javascript
const writableStream = new WritableStream({
  write(chunk) {
    // معالجة البيانات المدخلة
  },
  close() {
    // إغلاق التيار
  },
  abort(err) {
    // التعامل مع الأخطاء
  }
});
```

### التفاصيل
- **write(chunk)**: وظيفة يتم استدعاؤها عند الحاجة لكتابة جزء من البيانات.
- **close()**: وظيفة يتم استدعاؤها عندما يتم الانتهاء من الكتابة.
- **abort(err)**: وظيفة يتم استدعاؤها في حالة وجود خطأ في الكتابة، حيث يمكن تمرير كائن الخطأ.

## الأمثلة
### مثال أساسي
```javascript
const writableStream = new WritableStream({
  write(chunk) {
    console.log(`كتابة البيانات: ${chunk}`);
  },
  close() {
    console.log("تم إغلاق التيار.");
  }
});

// استخدام التيار
const writer = writableStream.getWriter();
writer.write("رسالة أولى");
writer.write("رسالة ثانية");
writer.close();
```

### مثال مع معالجة الأخطاء
```javascript
const writableStream = new WritableStream({
  write(chunk) {
    if (chunk === "خطأ") {
      throw new Error("حدث خطأ!");
    }
    console.log(`كتابة البيانات: ${chunk}`);
  },
  close() {
    console.log("تم إغلاق التيار.");
  },
  abort(err) {
    console.error(`تم إلغاء الكتابة: ${err.message}`);
  }
});

// استخدام التيار
const writer = writableStream.getWriter();
try {
  writer.write("رسالة أولى");
  writer.write("خطأ"); // سيلقي خطأ
} catch (error) {
  console.error(error);
}
```

## الشرح
من الأمور الشائعة التي يجب الانتباه إليها عند استخدام WritableStream:
- **إدارة الأخطاء**: يجب مراعاة كيفية التعامل مع الأخطاء، حيث يمكن أن يؤدي عدم معالجة الأخطاء بشكل صحيح إلى مشاكل في التطبيق.
- **إغلاق التيار**: تأكد من أنك تغلق التيار بعد الانتهاء من الكتابة، لتفادي تسريبات الذاكرة.
- **التوافق**: تأكد من أن البيئة التي تعمل فيها تدعم واجهة Web Streams API.

## ملخص جملة واحدة
WritableStream في جافا سكريبت هو واجهة تسمح بالتحكم في كيفية ووقت كتابة البيانات إلى تيارات مخصصة.